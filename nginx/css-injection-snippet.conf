# Nginx Configuration Snippet for CSS Injection
# Add this to your location block or server block in your Hiddify Panel nginx config
# Location: /etc/nginx/sites-available/hiddify

# Method: Use sub_filter to inject CSS that hides Hiddify branding
# This works by modifying the HTML response to include our custom CSS

# In your location block (usually something like: location /admin), add:

location / {
    # Your existing proxy settings
    proxy_pass http://127.0.0.1:8000;  # or your hiddify panel port
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;

    # Enable sub_filter
    sub_filter_once off;
    sub_filter_types text/html;

    # Inject CSS before </head> tag
    sub_filter '</head>' '<style>
        footer, [class*="Hiddify"], [class*="hiddify"], [class*="footer"],
        [class*="social"], a[href*="github"], a[href*="telegram"],
        a[href*="youtube"], [class*="version"] {
            display: none !important;
        }
    </style></head>';
}

# Alternative: Using a separate CSS file injection
# If you want to use the external CSS file from this repo:

location / {
    proxy_pass http://127.0.0.1:8000;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;

    # Enable sub_filter
    sub_filter_once off;
    sub_filter_types text/html;

    # Inject link to external CSS file
    sub_filter '</head>' '<link rel="stylesheet" href="/custom-styles.css"></head>';
}

# Then serve the CSS file at /custom-styles.css:
location /custom-styles.css {
    alias /path/to/styles/hide-branding.css;
    types { text/css css; }
}

# Test your config:
# sudo nginx -t

# Reload nginx:
# sudo systemctl reload nginx
